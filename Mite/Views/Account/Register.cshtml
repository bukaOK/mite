@using Mite.Core
@using Mite.Extensions
@model Mite.Models.RegisterModel

@{
    ViewBag.Title = "Регистрация";
}
<script src="~/Scripts/password-strength.js"></script>
<script>
    $(function () {
            $('.ui.dropdown').dropdown();
            $(".ui.form").form({
                on: "submit",
                fields: {
                    UserName: {
                        rules: [
                            {
                                type: "empty",
                                prompt: $("#UserName").data("valRequired")
                            },
                            {
                                type: "regExp",
                                value: $("#UserName").data("valRegexPattern"),
                                prompt: $("#UserName").data("valRegex")
                            }
                        ]
                    },
                    Email: {
                        rules: [
                            {
                                type: "empty",
                                prompt: $("#Email").data("valRequired")
                            },
                            {
                                type: "email",
                                prompt: "Введите правильный e-mail"
                            }
                        ]
                    },
                    Password: {
                        rules: [
                            {
                                type: "empty",
                                prompt: $("#Password").data("valRequired")
                            },
                            {
                                type: "length[6]",
                                prompt: "Минимальная длина пароля - 6 символов"
                            }
                        ]
                    },
                    ConfirmPassword: {
                        depends: "Password",
                        rules: [
                            {
                                type: "empty",
                                prompt: $("#ConfirmPassword").data("valRequired")
                            },
                            {
                                type: "match[Password]",
                                prompt: $("#ConfirmPassword").data("valEqualto")

                            }
                        ]
                    }
                }
            });
            initPassStrength('#Password');
        });
</script>
<div class="ui center aligned grid">
        @using (Html.BeginForm("Register", "Account", FormMethod.Post, new { @class = "ui sixteen wide mobile eight wide tablet six wide computer column left aligned register form" }))
        {
            <h2 class="ui blue header">
                <i class="checkmark icon"></i>
                <span class="content">Регистрация</span>
            </h2>
            <div class="ui top attached segment">
                @Html.EditorFor(x => x.UserName, new { InputIcon = "hashtag"})
                @Html.EditorFor(x => x.Email, new { InputIcon = "at" })
                @Html.EditorFor(x => x.Password, new { InputIcon = "lock" })
                <div class="ui message" style="display: none" id="pass-strength"></div>
                @Html.EditorFor(x => x.ConfirmPassword, new {InputIcon = "mail forward" })
                @Html.AntiForgeryToken()
                <button type="submit" class="ui animated blue button">
                    <span class="visible content">Зарегистрироваться</span>
                    <span class="hidden content"><i class="checkmark icon"></i></span>
                </button>
            </div>
            @Html.ValidationSum()
        }
</div>